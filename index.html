<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notes Organizer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-purple-100 to-blue-100 min-h-screen font-sans p-4">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold text-center text-purple-700 mb-4">ðŸ“š Subject Notes Organizer</h1>

    <!-- Admin Login -->
    <div id="adminLogin" class="mb-4 text-center">
      <input type="password" id="adminPass" placeholder="Enter admin password" class="p-2 border rounded border-purple-400" />
      <button onclick="loginAsAdmin()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Login as Admin</button>
    </div>

    <!-- Admin Add Form (Hidden by default) -->
    <div id="adminTools" class="flex gap-2 mb-6 hidden">
      <input type="text" id="subjectInput" placeholder="Add new subject..." class="flex-1 p-2 rounded border border-purple-400" />
      <button onclick="addSubject()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">Add Subject</button>
    </div>

    <div id="subjectContainer" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <!-- Subjects will be added here -->
    </div>
  </div>

  <script>
    const subjectContainer = document.getElementById('subjectContainer');
    const adminTools = document.getElementById('adminTools');
    let isAdmin = false;

    function loadSubjects() {
      const saved = localStorage.getItem('subjects');
      if (saved) {
        const subjects = JSON.parse(saved);
        subjects.forEach(renderSubject);
      }
    }

    function saveSubjects() {
      if (!isAdmin) return; // prevent viewer changes
      const subjects = Array.from(document.querySelectorAll('.subject-card')).map(card => {
        const title = card.querySelector('.subject-title').textContent;
        const files = Array.from(card.querySelectorAll('.file-list li')).map(li => li.textContent);
        return { title, files };
      });
      localStorage.setItem('subjects', JSON.stringify(subjects));
    }

    function loginAsAdmin() {
      const inputPass = document.getElementById('adminPass').value;
      const correctPass = "admin123"; // change this to your private password
      if (inputPass === correctPass) {
        isAdmin = true;
        adminTools.classList.remove('hidden');
        document.getElementById('adminLogin').classList.add('hidden');
        document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('hidden'));
      } else {
        alert("Incorrect password.");
      }
    }

    function addSubject() {
      const subjectInput = document.getElementById('subjectInput');
      const subject = subjectInput.value.trim();
      if (!subject) return;
      renderSubject({ title: subject, files: [] });
      saveSubjects();
      subjectInput.value = '';
    }

    function renderSubject({ title, files }) {
      const card = document.createElement('div');
      card.className = 'subject-card bg-white rounded-xl shadow-md p-4 relative';

      card.innerHTML = `
        <h2 class="subject-title text-xl font-semibold mb-2 text-purple-600">${title}</h2>
        <input type="file" class="mb-2 admin-only hidden" multiple onchange="handleFileUpload(this)" />
        <ul class="file-list list-disc list-inside text-sm text-gray-700 mb-2"></ul>
        <button onclick="deleteSubject(this)" class="text-sm text-red-500 hover:underline admin-only hidden">Delete Subject</button>
      `;

      const fileList = card.querySelector('.file-list');
      files.forEach(file => {
        const li = document.createElement('li');
        li.textContent = file;
        fileList.appendChild(li);
      });

      subjectContainer.appendChild(card);
    }

    function handleFileUpload(input) {
      const files = Array.from(input.files);
      const fileList = input.parentElement.querySelector('.file-list');
      files.forEach(file => {
        const li = document.createElement('li');
        li.textContent = file.name;
        fileList.appendChild(li);
      });
      saveSubjects();
    }

    function deleteSubject(button) {
      if (!isAdmin) return;
      const card = button.closest('.subject-card');
      card.remove();
      saveSubjects();
    }

    loadSubjects();
  </script>
</body>
</html>
